# Material-Point-Generator
This repository contains Python scripts that use Gmsh to generate material and surface points from STL files, to be used in a Material Point Method solver. Tetrahedral mesh centroids serve as material points with associated volumes, while surface triangles are used to create surface points with calculated normal vectors.
Here’s an updated README that includes detailed usage instructions, software requirements, and necessary libraries:

---

# Material Point Discretization from STL Files

This repository contains Python scripts designed to facilitate the generation of material points from STL files. The workflow involves creating tetrahedral meshes, extracting centroids and volumes for each tetrahedron, and generating surface material points with normal vectors. These scripts leverage the Gmsh API and are tailored for computational simulations that require material point discretization.

## Repository Contents

### 1. `stl_mesher.py`
This script processes an STL file to generate a 3D tetrahedral mesh using Gmsh. The generated mesh serves as a foundation for further processing. It allows for optional mesh refinement and characteristic length adjustments.

#### **Usage:**
```bash
python stl_mesher.py <STL_FILE> [options]
```
#### **Options:**
- `-char_length=<value>`: Set the characteristic length for mesh generation. This determines the size of the mesh elements. Default is 1.0.
  
  **Example:**
  ```bash
  python stl_mesher.py model.stl -char_length=0.5
  ```

- `-refinement=<level>`: Set the mesh refinement level. Higher levels generate finer meshes. Default is 0 (no refinement).
  
  **Example:**
  ```bash
  python stl_mesher.py model.stl -char_length=0.5 -refinement=2
  ```

**Output:**
- Generates a `.msh` file named after the STL file, containing the tetrahedral mesh.

### 2. `mesh_to_mp.py`
This script processes the tetrahedral mesh generated by `stl_mesher.py` and extracts material points from the centroids of the tetrahedra. The volume of each tetrahedron is stored as the material point’s volume.

#### **Usage:**
```bash
python mesh_to_mp.py <MESH_FILE>
```

**Output:**
- Creates a text file containing the centroid coordinates and volumes for each tetrahedron in the mesh.

### 3. `sp_and_normals.py`
This script generates surface material points from the surface triangles of the tetrahedral mesh. It calculates the centroids of the triangles and their corresponding normal vectors, which are essential for defining the orientation of the surface points.

#### **Usage:**
```bash
python sp_and_normals.py <MESH_FILE>
```

**Output:**
- Produces a text file containing the centroid coordinates and normal vectors of the surface triangles.

### 4. `visualizer.py`
This script visualizes the generated material points and surface points, including their normals. It provides a graphical representation of the tetrahedral centroids and the surface triangles with their normals for verification and better understanding.

#### **Usage:**
```bash
python visualizer.py <TETRA_FILE> <TRIANGLE_FILE>
```

**Arguments:**
- `<TETRA_FILE>`: Text file containing tetrahedral centroids and volumes (output from `mesh_to_mp.py`).
- `<TRIANGLE_FILE>`: Text file containing surface triangle centroids and normals (output from `sp_and_normals.py`).

**Output:**
- Opens a 3D plot with:
  - Tetrahedral centroids marked in blue.
  - Surface triangle centroids marked in red.
  - Normal vectors at each surface triangle centroid.

## Software and Libraries Required

To run these scripts, ensure that you have the following software and libraries installed:

### **Software:**
- **Gmsh**: A 3D finite element mesh generator with a built-in CAD engine and post-processor. Ensure Gmsh is installed and accessible in your system's PATH. You can download it from [Gmsh’s official website](http://gmsh.info/).

### **Python Libraries:**
- **numpy**: A library for large multi-dimensional arrays and matrices.
- **matplotlib**: A plotting library for creating static, animated, and interactive visualizations in Python.
- **gmsh**: Python API for Gmsh, allowing mesh generation and manipulation from Python scripts.
- **numpy-stl**: A library for reading, writing, and modifying STL files.

You can install these libraries using pip:

```bash
pip install numpy matplotlib gmsh numpy-stl
```

## Installation

Clone the repository to your local machine:

```bash
git clone https://github.com/yourusername/yourrepositoryname.git
```

Navigate to the directory:

```bash
cd yourrepositoryname
```

Ensure all necessary libraries and software are installed before running the scripts.

## Usage Workflow

1. **Generate Tetrahedral Mesh:**
   - Run `stl_mesher.py` to create a tetrahedral mesh from your STL file.
   
2. **Extract Material Points:**
   - Use `mesh_to_mp.py` to extract the material points and their volumes from the mesh.
   
3. **Generate Surface Points:**
   - Execute `sp_and_normals.py` to generate surface material points and calculate their normals.
   
4. **Visualize Points and Normals:**
   - Use `visualizer.py` to visualize the generated material points and their associated normals.
